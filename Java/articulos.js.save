var Modulo = "articulos";
var Funcionalidad = {consultar: "consultar",editar: "editar",eliminar: "eliminar",agregar: "agregar",busqueda: "busqueda"};
var UltimoFolio = 0;
$( document ).ready(function() {

  FuncionesGeneral.template(Modulo,Funcionalidad.consultar,"#consultar");
  FuncionesGeneral.template(Modulo,Funcionalidad.agregar,"#agregar");
  $("#agregar_"+Modulo).hide();
    FuncionesGeneral.ActualizaFolio(Modulo,"codigo");
    var registros = FuncionesGeneral.Consultar(Modulo);
    if(registros){
      for(indice in registros){
          FuncionesGeneral.AgregarCamposTabla(Modulo,registros,indice);                       
      }
    }
    $(document).on("click","#nuevo_articulo",function(event){
      event.preventDefault();
      FuncionesGeneral.ActualizaFolio(Modulo,"codigo");
      $("#nuevo_articulo").hide();
      $("#consultar_"+Modulo).hide();
      $("#agregar_"+Modulo).show();
    	
    });

	$("#guardar_"+Modulo).click(function(){
           var data = $("#articulos").serializeArray();
           var mensaje = Validaciones.publicValidacionGeneral(data);
           if(!mensaje.boleano){
               alert(mensaje.mensaje);
               return false;
           }
            FuncionesGeneral.InsertarRegistro(Modulo,data);
            $("#nuevo_articulo").show();
            $("#consultar_"+Modulo).html("");
            FuncionesGeneral.template(Modulo,Funcionalidad.consultar,"#consultar");
            $("#agregar_"+Modulo).hide();
            var registros = FuncionesGeneral.Consultar(Modulo);
            if(registros){
              for(indice in registros){
                  $("#consultar_"+Modulo).show();
                  FuncionesGeneral.AgregarCamposTabla(Modulo,registros,indice);                       
              }
            }

      });

  $(document).on("click",".articulo_eliminar",function(index){
       var arreglo = index.currentTarget.id.split("_");
       var id = arreglo[1];
       if(confirm("Estas Seguro que deseas eliminar este registro")){
          FuncionesGeneral.PublicEliminar(Modulo,id);
       }
       index.preventDefault();
  });

   $(document).on("click",'.editar',function(index){
       var arreglo = index.currentTarget.id.split("_");
       var id = arreglo[1];
       if(confirm("Estas Seguro que deseas editar este registro")){
          FuncionesGeneral.PublicDatosEditar(Modulo,id);
       }
       index.preventDefault();    
  });


   $(document).on("click",'#cancelar_'+Modulo,function(index){
       if(confirm("Estas seguro que desea salir de "+Modulo)){
            $("#nuevo_articulo").show();
             $("#agregar_"+Modulo).hide();
             $("#consultar_"+Modulo).show();     
            FuncionesGeneral.LimpiarCampos(Modulo);                                 
       }
  });

});
